#!/usr/bin/env sh

# convert <inputfile.mp3> <outputfile.m4a>
convert () {
    ffmpeg -i ${1} ${2}
}

# @TODO
for file in ${HOME}/syncthing/pixel4a/Music/newpipe/*.mp3; do
    nohub setsid $(audiograbber ${file}) >/dev/null 2>&1 < /dev/null &
done

# @TODO
main () {
    msg "Encoding mp3 -> m4a"

    for file in ${HOME}/syncthing/pixel4a/Music/newpipe/*.mp3; do
        outputfile="${file#*.}.m4a"
        nohub setsid $(record_my_desktop "${file}" "${outputfile}) >/dev/null 2>&1 < /dev/null &
        info "Encoding aac (libfdk): ${file} -> ${outfile}"
    done
}
main


