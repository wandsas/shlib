#!/bin/sh

. ~/lib/tmux.sh

tmux_session="dev_env"

if tmux has-session -t ${tmux_session} 2>/dev/null; then
    info "${tmux_session} session already exists! Attaching ..."
    tmux attach-session -t ${tmux_session}
    exit
fi

if [ -n "${TMUX}" ]; then
    info "Detach from the tmux server before running this."
fi

tmux new-session -d -s ${tmux_session}
    
tmux rename-window -t ${tmux_session}:1 "build"
tmux send-keys -t ${tmux_session}:1  bash C-m

tmux new-window -t ${tmux_session}:2 -n "main"
tmux send-keys -t ${tmux_session}:2 htop C-m
tmux split-window -d

tmux attach-session -t ${tmux_session}:1
